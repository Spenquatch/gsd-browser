# GSD Browser Configuration Example
# Copy this file to .env and customize for your environment

# ============================================================================
# LLM Configuration
# ============================================================================

# LLM Provider (anthropic, openai, chatbrowseruse, ollama)
GSD_BROWSER_LLM_PROVIDER=anthropic

# Model Selection
# DEFAULT: claude-haiku-4-5 with Sonnet fallback (cost-optimized with reliability safety net)
# Alternative: claude-sonnet-4-5 (higher cost, no fallback needed)
GSD_BROWSER_MODEL=claude-haiku-4-5

# Optional fallback model (recommended when using Haiku)
GSD_BROWSER_FALLBACK_LLM_PROVIDER=anthropic
GSD_BROWSER_FALLBACK_MODEL=claude-sonnet-4-5

# Anthropic API Key (required)
ANTHROPIC_API_KEY=

# ============================================================================
# Web Evaluation Agent Timeouts
# ============================================================================

# Step Timeout (seconds) - Max time per individual step
GSD_BROWSER_WEB_EVAL_STEP_TIMEOUT_S=15.0

# Budget Timeout (seconds) - Max time for entire task
# This is a backstop for hung/runaway tasks. The real safety limit is MAX_STEPS below.
#
# Recommended: 240-300s for production (generous, allows complex multi-step tasks)
# Conservative: 120-180s for testing (catches slow tasks)
# Fast-fail: 60s for simple tasks only (2-3 steps)
#
# Note: If task completes in 30s, budget of 300s doesn't matter. Set generously.
GSD_BROWSER_WEB_EVAL_BUDGET_S=240.0

# Max Steps - Safety limit for number of agent steps
# This is the REAL limit that prevents runaway processes and controls cost.
# Each step = API call, so 25 steps is predictable cost even with high budget timeout.
GSD_BROWSER_WEB_EVAL_MAX_STEPS=25

# ============================================================================
# Vision Mode Configuration
# ============================================================================

# Vision Mode - Controls how browser-use perceives web pages
# Options:
#   - auto: Intelligent hybrid (includes screenshot tool, only uses when model requests)
#   - true: Always use vision (hybrid DOM+Vision, most reliable but expensive)
#   - false: DOM-only (no screenshots, fastest and cheapest)
#
# RECOMMENDED: auto (balanced cost and capability)
#
# Mode comparison:
#   - auto: Screenshots taken only when needed, good balance
#   - true: Every step includes screenshot analysis, highest cost but most reliable
#   - false: No vision at all, may fail on complex visual layouts
#
# Use auto for most production scenarios. Only use true if you need maximum
# reliability on visually complex sites. Use false only for text-heavy sites
# where DOM parsing is sufficient.
GSD_BROWSER_USE_VISION=auto

# ============================================================================
# Advanced Optimization Options (Optional)
# ============================================================================

# Fallback LLM - Automatic model upgrade when primary fails
# -------------------------------------------------------
# When the primary model fails (validation errors, API errors), browser-use
# automatically switches to the fallback model for that step.
#
# Strategy 1: Haiku primary + Sonnet fallback (Cost-optimized with safety net)
#   - Haiku handles simple tasks (fast, cheap)
#   - Sonnet catches validation errors (reliable)
#   - Expected: 50% â†’ 70-80% pass rate vs pure Haiku
#
# GSD_BROWSER_FALLBACK_LLM_PROVIDER=anthropic
# GSD_BROWSER_FALLBACK_MODEL=claude-sonnet-4-5
#
# Strategy 2: Sonnet primary + Opus fallback (Maximum reliability)
#   - Sonnet for regular tasks (reliable)
#   - Opus for rare complex failures (most capable)
#
# GSD_BROWSER_FALLBACK_MODEL=claude-opus-4-5
#
# Note: Both primary and fallback must be configured together.
# Leave commented to use single-model strategy (default).

# Flash Mode - Disable reasoning for maximum speed (Not yet implemented)
# -------------------------------------------------------
# When enabled, disables thinking/evaluation/planning, keeping only memory.
# Performance: ~3 seconds per step (vs 10-15s with reasoning)
#
# Use for:
#   - Simple repetitive tasks (form filling, data scraping)
#   - High-volume production workloads
#   - Cost-sensitive applications
#
# Don't use for:
#   - Complex decision-making tasks
#   - Ambiguous requirements
#   - Tasks requiring adaptive reasoning
#
# GSD_BROWSER_FLASH_MODE=false
#
# Note: This feature requires implementation (see artifacts/STEP_4_5_RESEARCH_SUMMARY.md)

# Max History Items - Limit memory window for long workflows (Not yet implemented)
# -------------------------------------------------------
# Limits the number of previous steps kept in agent memory.
# Default: None (keep all steps)
#
# Use when:
#   - Workflows have 8+ steps (prevent token limit issues)
#   - Need to control context window usage
#
# Set to: 5-10 for long workflows
#
# GSD_BROWSER_MAX_HISTORY_ITEMS=
#
# Note: This feature requires implementation (see artifacts/STEP_4_5_RESEARCH_SUMMARY.md)

# ============================================================================
# Model Comparison Results (Reference)
# ============================================================================
# Based on real-world sanity testing with 10 diverse scenarios:
#
# Haiku 4.5 (15s timeout, 60s budget):
#   - Pass rate: 50% (2/4 simple tests)
#   - Validation errors: 9 per 4 tests
#   - Cost per test: ~$0.02
#   - Speed: Fast (12-18s per test)
#   - Recommended for: Cost-sensitive, simple tasks only
#
# Sonnet 4.5 (30s timeout, 120s budget):
#   - Pass rate: 100% (8/10, 2 stress tests soft_fail)
#   - Validation errors: 0
#   - Cost per test: ~$0.075
#   - Speed: Moderate (15-24s per test)
#   - Recommended for: Production, reliable automation
#
# See artifacts/real_world_sanity/MODEL_COMPARISON_haiku_vs_sonnet.md

# ============================================================================
# Alternative Configurations
# ============================================================================

# Cost-Optimized with Fallback (Haiku primary + Sonnet fallback)
# Best of both worlds: speed/cost + reliability safety net
# GSD_BROWSER_MODEL=claude-haiku-4-5
# GSD_BROWSER_FALLBACK_LLM_PROVIDER=anthropic
# GSD_BROWSER_FALLBACK_MODEL=claude-sonnet-4-5
# GSD_BROWSER_WEB_EVAL_STEP_TIMEOUT_S=15.0
# GSD_BROWSER_WEB_EVAL_BUDGET_S=240.0
# GSD_BROWSER_USE_VISION=auto

# Cost-Optimized (Haiku only) - Use only for simple, non-critical tasks
# GSD_BROWSER_MODEL=claude-haiku-4-5
# GSD_BROWSER_WEB_EVAL_STEP_TIMEOUT_S=15.0
# GSD_BROWSER_WEB_EVAL_BUDGET_S=120.0
# GSD_BROWSER_USE_VISION=false  # DOM-only for maximum cost savings

# Very Complex Tasks (8+ step workflows, slow websites)
# GSD_BROWSER_MODEL=claude-sonnet-4-5
# GSD_BROWSER_WEB_EVAL_STEP_TIMEOUT_S=30.0
# GSD_BROWSER_WEB_EVAL_BUDGET_S=360.0
# GSD_BROWSER_USE_VISION=true  # Always use vision for maximum reliability

# Fast-Fail Mode (Quick tasks only, fail fast on problems)
# GSD_BROWSER_MODEL=claude-sonnet-4-5
# GSD_BROWSER_WEB_EVAL_STEP_TIMEOUT_S=20.0
# GSD_BROWSER_WEB_EVAL_BUDGET_S=60.0
# GSD_BROWSER_USE_VISION=auto  # Balanced approach
